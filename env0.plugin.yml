name: OPA
icon: https://cncf-branding.netlify.app/img/projects/opa/stacked/color/opa-stacked-color.png
inputs:
  path:
    type: string
    required: true
  flags:
    type: string
  query:
    type: string
    required: true

run:
  runtime: bash
  exec: |
    curl -L -o opa https://openpolicyagent.org/downloads/v0.46.1/opa_linux_amd64_static
    chmod 755 ./opa
    
    ./opa eval -b ${inputs.bundle} ${inputs.flags} ${inputs.query}
